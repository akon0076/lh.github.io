---
layout:     post
title:      "Code Review 金字塔（译）"
subtitle:   "CodeReview还在纠结代码风格、样式问题吗，来看看大佬是如何做Code Review 的吧"
date:       2023-01-01 23:00:00
author:     "LH"
catalog:    false
no-catalog: true
published:  true
header-style: text
tags:
  # - 被夹
---

> 除了基本的翻译，本文章还给一些关键字加了链接，[原文地址](https://www.patterns.dev/posts/rendering-introduction/)

当谈到代码审查时， 一个普遍的现象是围绕代码格式和样式等方面进行了冗长的讨论， 而重要的方面（代码更改是否完成了它应该做的事情，它是否具有性能，它是否向后兼容现有的客户，以及许多其他方面）往往得到较少的关注，为了提高对该问题的认识并就需要关注的方面提供一些指导

为了提高对这个问题的认识，并就需要关注的方面提供一些指导，前几天我在 Twitter 上分享了一个小图，我称之为“代码审查金字塔”。

由于有些人要求该资源的永久、可参考位置，而其他人则想要高分辨率打印版本，我又把它放在这里：

<img src="/img/single/codereview-pyramid.png" loading=lazy>


### 🤖️代码风格

- 项目是否应用了格式样式，代码是否有遵循该规则
- 代码是否遵守商定的命名习惯
- 代码是遵循DRY(Don't repeat yourself，[一次且仅一次](https://zh.wikipedia.org/wiki/%E4%B8%80%E6%AC%A1%E4%B8%94%E4%BB%85%E4%B8%80%E6%AC%A1))原则，是否有可抽离的公共代码
- 代码是否有足够的可读性（如方法长度等）

### 🤖️测试

- 是否通过了所有测试
- 新功能是否经过合理测试
- 容易被忽视的case是否经过测试
- 是否尽可能使用单元测试，必要时使用单元测试
- 是否有针对 NFR(Non-Functional Requirement，[非功能性需求](https://zh.wikipedia.org/zh-cn/%E9%9D%9E%E5%8A%9F%E8%83%BD%E6%80%A7%E9%9C%80%E6%B1%82)) 的测试，例如性能、安全等

### 👨文档

- 是否合理地记录新功能
- 是否涵盖了相关类型的文档：自述文件、API文档、用户指南、参考文档等
- 是否容易理解，没有明显的类型和语法错误

### 👨实现语意

- 是否满足原来的要求/逻辑（‼️这项对于复杂业务逻辑的系统非常重要）
- 是否逻辑上正确
- 是否有不必要的复杂性
- 是否健壮（没有并发问题、恰当的错误处理等）
- 是否高性能
- 它是否安全（例如 没有SQL 注入等）
- 是否可观察（例如指标、日志记录、跟踪等）
- 是否新添加的依赖项会发挥作用（‼️对前端很重要，引入新的包会增加bundle体积）
- 新加的依赖的授权许可证是否可接受

### 👨API语义

- API尽可能简单有用
- 是否一种方法做一件事，而不是多个
- 是否一致，是否遵循最少意外原则（最小惊奇原则）
- 是否API/内部的拆分得足够清晰，API 中没有内部泄漏
- 面向用户的部分（API 类、配置、指标、日志格式等）是否没有重大更改
- 新的 API 通常有用且没有过于具体吗

## [原文地址](https://www.morling.dev/blog/the-code-review-pyramid/)
